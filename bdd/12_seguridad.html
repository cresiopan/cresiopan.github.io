<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-08-18 Tue 14:24 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Seguridad</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="/res/org.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="outline-container-org5a09763" class="outline-2">
<h2 id="org5a09763">Seguridad de la información</h2>
<div class="outline-text-2" id="text-org5a09763">
<p>
La seguridad de la informacion es el conjunto de procedimientos y medidas
tomadas para proteger a los componentes de los sistemas de informacion
</p>

<p>
Implica los siguientes factores:
</p>
<ul class="org-ul">
<li>Confidencilidad: No ofrecer la informacion a individuos no autorizados</li>
<li>Integridad: Asegurar su correctitud durante el ciclo de vida.</li>
<li>Disponibilidad: Asegurar que la informacion este disponible cuando es
requerida por personas autorizadas.</li>
<li>No repudio: que nadie que haya accedido a cierta informacion pueda negar
haberlo hecho.</li>
</ul>
</div>

<div id="outline-container-orgbfb84b5" class="outline-3">
<h3 id="orgbfb84b5">Politicas de seguridad de datos</h3>
<div class="outline-text-3" id="text-orgbfb84b5">
<p>
Las organizaciones utilizan distintas tecnicas para resguardar la seguridad de
datos:
</p>
<ul class="org-ul">
<li>Encriptado, firewalls, manejo de usuarios y permisos, cominaciones seguras
(ssh), etc.</li>
</ul>

<p>
Nos enfocaremos en la <code>seguridad de datos</code>, es decir, en la proteccion de los
datos almacenados en un SGDB. Esta es solo una de las facetas de la seguridad de
la informacion.
</p>

<p>
Toda organizacion deberia contar con una <code>politica de seguridad de datos (data
   security policy)</code>
</p>

<p>
Ejemplo: Universidad de Berkeley
</p>
<ul class="org-ul">
<li>Data Policy:<a href="https://berkeleycollege.edu/files_bc/Data_Security_Policy_Statement.pdf">https://berkeleycollege.edu/files_bc/Data_Security_Policy_Statement.pdf</a></li>
<li>Data best practices: [link]</li>
<li>How to protect against SQL injection: [link]</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org714434e" class="outline-2">
<h2 id="org714434e">Control de acceso basado en roles (RBAC)</h2>
<div class="outline-text-2" id="text-org714434e">
</div>
<div id="outline-container-org4aac212" class="outline-3">
<h3 id="org4aac212">Historia [ELM16 30.2 30.3]</h3>
<div class="outline-text-3" id="text-org4aac212">
<p>
En la década del ’80 el Departamento de Defensa de los EE.UU. desarrolló dos
sistemas de control de acceso a la información: DAC y MAC, con el objetivo de
prevenir accesos no autorizados a información clasificada.
</p>

<div class="org-src-container">
<pre class="src src-DAC">Un objeto solo puede ser accedido por el usuario o grupo al que pertenece. Existe el concepto de dueño (owner). El dueño puede permitir el acceso a su recurso a otro usuario o grupo de usuarios.
</pre>
</div>

<div class="org-src-container">
<pre class="src src-MAC">El control de acceso es determinado por el sistema, quien establece una serie de relaciones entre los usuarios y los objetos (tipicamente se asignan niveles a ambos). Historicamente ha sido utilizado en sistemas con multiples jerarquias y que almacenan informacion altamente sensible.
</pre>
</div>
</div>
</div>

<div id="outline-container-org5374570" class="outline-3">
<h3 id="org5374570">RBAC [ELM16 30.3.2]</h3>
<div class="outline-text-3" id="text-org5374570">
<p>
El <code>control de acceso basado en roles (RBAC, role based access control)</code>
surgió en 1992 como una evolución de DAC, buscando adaptar los mecanismos de
seguridad de la información a la estructura de las organizaciones, que cada
día estaban más digitalizadas.
</p>

<p>
Hoy en día RBAC es ampliamente utilizado por una mayoría de SGBD’s y es parte
del estándar SQL desde 1999.
</p>
</div>

<div id="outline-container-orgac7eced" class="outline-4">
<h4 id="orgac7eced">Componentes</h4>
<div class="outline-text-4" id="text-orgac7eced">
<p>
RBAC esta basado en la definicion de <code>roles</code> para las distintas actividades
y funciones desarrolladas por los miembros de una organizacion, con el
objetivo de regular el acceso de los usuarios a los recursos disponibles.
</p>

<p>
Se utiliza la siguiente terminologia:
</p>
<ul class="org-ul">
<li>Usuarios: Son las personas.</li>
<li>Roles: Son conjuntos de funciones y responsabilidades</li>
<li>Objetos: Son aquello a ser protegido. En el caso de los SGDBs son las
tablas, esquemas, documentos, columnas, &#x2026;</li>
<li>Operaciones: Son las acciones que pueden realizarse sobre los objetos.</li>
<li>Permisos: Acciones concedidas o revocadas a un usuario o rol sobre un
objeto determinado.</li>
</ul>


<div class="figure">
<p><img src="./modelo_datos_rbac.png" alt="modelo_datos_rbac.png" />
</p>
</div>

<p>
Este modelo permite expresar restricciones como:
</p>
<ul class="org-ul">
<li>Esther Maio es la gerente de ventas</li>
<li>Un “gerente de Ventas” es un “empleado del Departamento de Ventas”.</li>
<li>Un “empleado del Departamento de Ventas” es “empleado de la empresa”.</li>
<li>Un “empleado de la empresa” puede “ver sus recibos de sueldo”.</li>
<li>Un “empleado del Departamento de Ventas” puede “ingresar el detalle de
unan ueva venta”.</li>
<li>Un “empleado del Departamento de Ventas” puede “ver el listado de clientes
morosos”.</li>
<li>El “gerente de Ventas”puede“ generar reclamos a clientes morosos”.</li>
</ul>
</div>
</div>

<div id="outline-container-org53c7e13" class="outline-4">
<h4 id="org53c7e13">Caracteristicas</h4>
<div class="outline-text-4" id="text-org53c7e13">
<p>
Existe una <code>jerarquia de roles</code>.
</p>

<p>
Soporta la implementacion de tres principios de seguridad:
</p>
<ol class="org-ol">
<li>Criterio del menor privilegio posible: si un usuario no va a realizar una
determinada operacion, entonces no debe tener permisos para realizarla.</li>
<li>Division de responsabilidades: se busca que nadie tenga suficientes
privilegios para utilizar el sistema en beneficio propio. Para completar
una tarea sensible deberia ser necesaria la participacion de roles
mutuamente excluyentes, cada uno realizando una operacion distinta.
<ul class="org-ul">
<li>Ejemplo: que el pago de una factura a un proveedor requiera la
aprobacion de un empleado de Pagos y la carga de los datos de los
proveedores deba realizarla un empleado de Compras.</li>
</ul></li>
<li>Abstrraccion de datos: los permisos son abstractos. Las operaciones
permitidas/prohibidas dependen de las propiedades del objeto en cuestion.</li>
</ol>
</div>
</div>
</div>
</div>

<div id="outline-container-org200ea24" class="outline-2">
<h2 id="org200ea24">Autenticacion y permisos en SQL</h2>
<div class="outline-text-2" id="text-org200ea24">
</div>
<div id="outline-container-org0d54f15" class="outline-3">
<h3 id="org0d54f15">Estructuras</h3>
<div class="outline-text-3" id="text-org0d54f15">
</div>
<div id="outline-container-orgeb2731f" class="outline-4">
<h4 id="orgeb2731f">RBAC en Postgres</h4>
<div class="outline-text-4" id="text-orgeb2731f">
<p>
La implementacion de RBAC en Postgres sigue el siguiente esquema:
</p>

<p>
rbac<sub>postgres.png</sub>
</p>

<p>
Solo existen roles (ie los usuarios se crean tambien como roles)
</p>
</div>
</div>
<div id="outline-container-orga364034" class="outline-4">
<h4 id="orga364034">Tablas, esquemas y bases</h4>
<div class="outline-text-4" id="text-orga364034">
<p>
En postgres la cima de la jerarquia de objetos son las <code>bases (databases)</code>.
</p>

<p>
Una base esta conformada por cero o mas <code>esquemas</code>, y un esquema es un
conjunto de <code>tablas</code> (aunque tambien contiene otros objetos, como funciones,
vistas, tipos de dato, etc)
</p>

<p>
imagen
</p>

<pre class="example">
La diferencia entre bases y esquemas es que una conexión al servidor postgres debe realizarse a una única base, aunque puede trabajar con más de un esquema de dicha base. Los esquemas son una separación lógica de las tablas, mientras que las bases están físicamente separadas. Cuando  instalamos  postgres,  automáticamente  se  configura  una  base postgres con un esquema public.
</pre>
</div>
</div>
</div>

<div id="outline-container-org7bfda6b" class="outline-3">
<h3 id="org7bfda6b">Gestion de usuarios y bases en postgres</h3>
<div class="outline-text-3" id="text-org7bfda6b">
<p>
Despues de la instalacion unicamente existe el usuario postgres, y una base
postgres con un esquema public.
</p>

<p>
Postgres cuenta con una serie de comandos para trabajar:
</p>
<ul class="org-ul">
<li>createuser (crear roles)</li>
<li>dropuser (eliminar roles)</li>
<li>createdb (crear bases)</li>
<li>dropdb (eliminar bases)</li>
<li>psql (cliente de postgres)</li>
<li>pg<sub>dump</sub> (importacion de datos externos)</li>
</ul>

<div class="org-src-container">
<pre class="src src-Modos">Para ejecutar un comando con un usuario X debemos estar logueados con ese mismo usuario en el sistema operativo.
Este criterio puede modificarse cambiando la autenticacion de "peer" a "password" u otro tipo en el archivo pg_hba.conf
(https://www.postgresql.org/docs/current/static/auth-methods.html)
</pre>
</div>
</div>

<div id="outline-container-orgf5c9c1c" class="outline-4">
<h4 id="orgf5c9c1c">Creacion de usuarios</h4>
<div class="outline-text-4" id="text-orgf5c9c1c">
<p>
La creacion de usuarios, grupos y roles se realiza con el comando <code>CREATE
    ROLE</code>. Su sintaxis completa depende de cada SGDB.
</p>

<p>
En Postgres tenemos:
</p>
<div class="org-src-container">
<pre class="src src-sql"><span style="color: #5EC4FF;">CREATE</span> <span style="color: #5EC4FF;">ROLE</span> nombre_usuario { SUPERUSER | CREATEDB | CREATEROLE | CREATEUSER |
LOGIN | PASSWORD clave | <span style="color: #5EC4FF;">IN</span> <span style="color: #5EC4FF;">ROLE</span> rol_1, rol_2, ... | ... };
</pre>
</div>

<p>
La opcion <code>SUPERUSER</code> indica que el usuario sera superusuario, es decir que
podra sobrepasar todas las restricciones de acceso.
</p>

<p>
La opcion <code>IN ROLE</code> asigna inmediatamente al nuevo usuario roles ya
existentes.
</p>

<p>
La opcion <code>LOGIN</code> es necesaria para que el rol pueda loguearse.
</p>

<p>
Nos conectamos con el usuario <code>postgres</code>&#x2026;
</p>

<p>
Y comenzamos creando un rol de administrador que sea superusuario:
</p>
<div class="org-src-container">
<pre class="src src-sql"><span style="color: #5EC4FF;">CREATE</span> <span style="color: #5EC4FF;">ROLE</span> <span style="color: #5EC4FF;">admin</span> LOGIN SUPERUSER;
</pre>
</div>

<p>
Y luego crearemos un usuario "lolo":
</p>
<div class="org-src-container">
<pre class="src src-sql"><span style="color: #5EC4FF;">CREATE</span> <span style="color: #5EC4FF;">ROLE</span> lolo LOGIN PASSWORD <span style="color: #539AFC;">'111'</span>;
</pre>
</div>

<p>
Tambien podiamos haber hecho todo esto con el comando <code>createuser</code>:
</p>
<div class="org-src-container">
<pre class="src src-sh">(      ) $ sudo su - postgres
postgres $ createuser -s admin   <span style="color: #41505E;"># </span><span style="color: #41505E;">Crea a admin como superusuario</span>
postgres $ createuser lolo       <span style="color: #41505E;"># </span><span style="color: #41505E;">Crea al usuario lolo</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcc373c6" class="outline-4">
<h4 id="orgcc373c6">Creacion de una base de datos</h4>
<div class="outline-text-4" id="text-orgcc373c6">
<p>
El comando <code>CREATE DATABASE</code> permite crear una nueva base en el servidor. Su
sintaxis es:
</p>
<div class="org-src-container">
<pre class="src src-sql"><span style="color: #5EC4FF;">CREATE</span> DATABASE nombre_db [ OWNER usuuario ];
</pre>
</div>

<p>
La opcion <code>OWNER</code> nos indica quien sera el <code>dueño</code> de la base. Si no se
indica, sera el usuario que ejecuta el comando de creacion.
</p>

<p>
El usuario que ejecuta el comando debe tener permisos de <code>CREATE DATABASE</code>.
</p>

<p>
Tambien podemos usar el comando <code>createdb</code> desde la terminal del sistema
operativo:
</p>
<div class="org-src-container">
<pre class="src src-sql">(      ) $ sudo su - postgres
postgres $ createdb -0 <span style="color: #5EC4FF;">admin</span> nombre_esquema # Crea la base y le asigna
                                            # al usuario <span style="color: #5EC4FF;">admin</span> como due&#241;o
</pre>
</div>
</div>
</div>

<div id="outline-container-org4d46f38" class="outline-4">
<h4 id="org4d46f38">Creacion de un esquema</h4>
<div class="outline-text-4" id="text-org4d46f38">
<p>
Dentro de una base, podemos crear un nuevo esquema con el comando <code>CREATE
    SCHEMA</code>. Su sintaxis (SQL estandar) es:
</p>

<div class="org-src-container">
<pre class="src src-sql"><span style="color: #5EC4FF;">CREATE</span> <span style="color: #5EC4FF;">SCHEMA</span> nombre_esquema [ AUTHENTICATION usuario ];
</pre>
</div>

<p>
La opcion <code>AUTHENTICATION</code> nos indica quien sera el <code>dueño</code> del esquema. Si no
se indica, sera el usuario que ejecuta el comando de creacion.
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
Last update: 2020-08-18 14:24
</div>
</body>
</html>
